---

- hosts: all
#- hosts: test-kitchen
  vars:
    - macos_apps_install_list:
  ## osxfuse is required for veracrypt
      - { u: 'https://github.com/osxfuse/osxfuse/releases/download/osxfuse-3.7.1/osxfuse-3.7.1.dmg', v: true, s: '0982bca1661d1b8df1c310e828984b25c11dfdc623a79566bfa6283779fad24c', n: 'FUSE', t: 'pkg', m: '/Volumes/FUSE for macOS', version: '3.7.1', to: '/Library/Filesystems/osxfuse.fs', exec_name: 'FUSE for macOS.pkg', versioncmd: '/usr/libexec/PlistBuddy -c "print :CFBundleVersion" "/Library/Filesystems/osxfuse.fs/Contents/Info.plist"' }
#      - { u: 'https://download-codeplex.sec.s-msft.com/Download/Release?ProjectName=veracrypt&DownloadId=1614080&FileTime=131212015497000000&Build=21031', f: 'VeraCrypt_1.19.dmg', v: true, s: 'da098bba200d2cebb193bd699eef6dec7834c8eeb579ed40bcd21d45487e6ce7', n: 'VeraCrypt', t: 'pkg', m: '/Volumes/VeraCrypt for OSX', version: '1.19', exec_name: 'VeraCrypt_Installer.pkg' }
      - { u: 'https://launchpad.net/veracrypt/trunk/1.21/+download/VeraCrypt_1.21.dmg', v: true, s: 'cbd3f80eca753edce40be134ccbd288805c93643b21d8cf21fd72c0fd544f377', n: 'VeraCrypt', t: 'pkg', m: '/Volumes/VeraCrypt for OSX', version: '1.21', exec_name: 'VeraCrypt_Installer.pkg' }
      - { u: 'https://github.com/google/santa/releases/download/0.9.20/santa-0.9.20.dmg', v: true, s: 'dcfc535c97732380ce5a116f352110ca15ee7ebaef0eeb63b648148b21f5f3a4', n: 'santa-0.9.20', t: 'pkg', version: '0.9.20', versioncmd: '/usr/local/bin/santactl version | sed "1 s/.*| //;q"', to: '/usr/local/bin/santactl' }
      - { u: 'https://pkg.osquery.io/darwin/osquery-2.7.0.pkg', v: true, s: 'e5eaf91b5582252f136476391cdd17985cc614536f964f38ddf7eb9cb69d0213', n: 'osquery', t: 'pkgonly', version: '2.7.0', versioncmd: '/usr/local/bin/osqueryi --version | sed "s/osqueryi version //"', to: '/usr/local/bin/osqueryi' }
      - { u: 'https://github.com/alterstep/dnscrypt-osxclient/releases/download/1.0.14/dnscrypt-osxclient-1.0.14.dmg', v: true, s: '47da81eef9e04762e9db7141dc4fdb26681940ab747677b22af50ce79b2b48bf', n: 'DNSCrypt', t: 'pkg', m: '/Volumes/dnscrypt-pkg', version: '1.0.14', versioncmd: '', to: '/Applications/DNSCrypt Menubar.app' }
## 201612 not compatible with sierra currently
#    - { u: 'https://releases.gpgtools.org/GPG_Suite-2016.10_v2.dmg', v: true, s: '8dbc5821876ca5c470d0127087f782ba02a842c52e6e19336cd935db7c5859ab' }
#      - { u: '', f: '', v: true, s: 'aaaa', n: '', t: 'app', m: '/Volumes/app', version: '', versioncmd: '', to: '/Applications/example.app' }

  roles:
    - juju4.macos-apps-install
    - juju4.harden-darwin

